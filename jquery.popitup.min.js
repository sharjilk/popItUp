!function(o){o.fn.popitup=function(t){function a(){$modal.css({left:"50%",bottom:"",right:""})}var e={widthSet:"300",overlayColor:"#000",overlayOpacity:"0.5",autoClose:!1,animation:null,colorChange:{color:null,background:null},chase:!1,chaseSpeed:"500",fixedModal:!1,modalPosition:[],containerToLoad:"",urlToLoad:"",onCloseModal:function(){},onOpenModal:function(){}},i=o.extend(!0,{},e,t),l=/^[0-9]/,n=/^[0-1][.][0-9]$/,s=/^[#][A-Fa-f0-9]/;if(o.each(i,function(o,t){"widthSet"===o&&null===t.match(l)&&(i[o]=e[o]),"overlayColor"===o&&null===t.match(s)&&(i[o]=e[o]),"overlayColor"==o&&null===t.match(n)&&(i[o]=e[o]),"autoClose"===o&&t!==!0&&(i[o]=e[o]),"colorChange"===o&&(null===t.color.match(s)&&(i[o].color=e[o].color),null===t.background.match(s)&&(i[o].background=e[o].background)),"chase"===o&&t!==!0&&(i[o]=e[o]),"fixedModal"===o&&t!==!0&&(i[o]=e[o]),"modalPosition"===o&&i.modalPosition.length>0&&(i.chase=!1)}),$modal=this,o("body").append('<div class="popitup-overlay"></div>'),o(".popitup-overlay").css({background:i.overlayColor,opacity:i.overlayOpacity}),i.fixedModal)var d="fixed";else d="absolute";if($modal.css({width:i.widthSet+"px",position:d,display:"block",opacity:"0","z-index":"99999"}),$margin_left=$modal.outerWidth()/2,$margin_top=$modal.outerHeight()/2,$modal.css({"margin-top":"-"+$margin_top+"px","margin-left":"-"+$margin_left+"px"}),i.modalPosition.length>0)$modal.css({top:i.modalPosition[0],left:i.modalPosition[1],margin:0,opacity:"1",position:"absolute"});else switch(i.animation){case"slideDown":$modal.css("top","0").animate({top:(o(window).height()+o(window).scrollTop())/2+"px",opacity:"1"},300),a();break;case"slideUp":$modal.css("bottom","0").animate({top:(o(window).height()+o(window).scrollTop())/2+"px",opacity:"1"},300),a();break;case"slideLeft":$modal.css({left:"0",top:(o(window).height()+o(window).scrollTop())/2+"px"}).animate({left:"50%",opacity:"1"},300),a();break;case"slideRight":$modal.css({right:"0",top:(o(window).height()+o(window).scrollTop())/2+"px"}).animate({left:"50%",opacity:"1"},300),a();break;default:$modal.css({top:"50%",opacity:"1"}),a()}if(""!=i.containerToLoad&&""!=i.urlToLoad){var c;c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),c.open("GET",i.urlToLoad),c.readyState>0&&o(i.containerToLoad).load(i.urlToLoad),c.send()}if(i.onOpenModal(),i.autoClose&&o(".popitup-overlay").bind("click",function(){if(i.modalPosition.length>0)$modal.css({top:"",left:"",right:"",bottom:""}).hide(),o(".popitup-overlay").remove();else switch(i.animation){case"slideDown":$modal.animate({top:"0",opacity:"0",display:"none"},300),a(),setTimeout(function(){$modal.css({top:"",left:"",right:"",bottom:""})},300);break;case"slideUp":$modal.animate({top:"100%",opacity:"0",display:"none"},300),a(),setTimeout(function(){$modal.css({top:"",left:"",right:"",bottom:""})},300);break;case"slideLeft":$modal.animate({left:"0",opacity:"0",display:"none"},300),a(),setTimeout(function(){$modal.css({top:"",left:"",right:"",bottom:""})},300);break;case"slideRight":$modal.animate({left:"100%",opacity:"0",display:"none"},300),a(),setTimeout(function(){$modal.css({top:"",left:"",right:"",bottom:""})},300);break;default:$modal.css({top:"",left:"",right:"",bottom:""}).hide(),o(".popitup-overlay").remove()}setTimeout(function(){o(".popitup-overlay").remove()},300),i.onCloseModal()}),!i.fixedModal&&i.chase){var p=0;o(window).scroll(function(t){var a=o(this).scrollTop();a>p?$modal.stop().animate({marginTop:o(window).scrollTop()+-93+"px"},+i.chaseSpeed):$modal.stop().animate({marginTop:o(window).scrollTop()+-93+"px"},+i.chaseSpeed),p=a})}return o("*").each(function(){$varClose=o(this).hasClass("popitup-close"),$varClose&&o(this).bind("click",function(){if(i.modalPosition.length>0)$modal.css({top:"",left:"",right:"",bottom:""}).hide(),o(".popitup-overlay").remove();else switch(i.animation){case"slideDown":$modal.animate({top:"0",opacity:"0",display:"none"},300),a(),setTimeout(function(){$modal.css({top:"",left:"",right:"",bottom:""})},300);break;case"slideUp":$modal.animate({top:"100%",opacity:"0",display:"none"},300),a(),setTimeout(function(){$modal.css({top:"",left:"",right:"",bottom:""})},300);break;case"slideLeft":$modal.animate({left:"0",opacity:"0",display:"none"},300),a(),setTimeout(function(){$modal.css({top:"",left:"",right:"",bottom:""})},300);break;case"slideRight":$modal.animate({left:"100%",opacity:"0",display:"none"},300),a(),setTimeout(function(){$modal.css({top:"",left:"",right:"",bottom:""})},300);break;default:$modal.css({top:"",left:"",right:"",bottom:""}).hide(),o(".popitup-overlay").remove()}setTimeout(function(){o(".popitup-overlay").remove()},300),i.onCloseModal.call()})}),i.colorChange&&$modal.css({color:i.colorChange.color,background:i.colorChange.background}),$modal}}(jQuery);
